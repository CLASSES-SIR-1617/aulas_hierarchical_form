<!DOCTYPE html>
<html>
<head>
	<title></title>

	<style type="text/css">
		#divcontent div.photo img {
			border-radius : 20px;
		}

		div.photo {
			display: inline-block;
			margin:5px;
		}
	</style>
	<script type="text/javascript" src="js/annyang.min.js"></script>
	<script type="text/javascript" src="jquery/jquery-3.1.1.js"></script>

	<script type="text/javascript">
		// colocar codigo que nao dependa da pagina
		$(document).ready(function () {

			commands = {
				"limpar" : function () {
					$("#divcontent").empty();
					},
				"procura *texto" : searchPhotos
			};
			
			annyang.setLanguage('pt-PT');
			annyang.debug();
			annyang.addCommands(commands);
			annyang.start();

			function searchPhotos (text) {
					$.ajax({
					url : "https://api.flickr.com/services/rest/",
					dataType : "json",
					method : "GET",
					data : {
						//"method": "flickr.photos.getRecent",
						"method": "flickr.photos.search",
						"text" : text,
						"per_page" : 20,
						"page": 1,
						"format": "json",
						"nojsoncallback" : 1,
						"api_key" : "1c029a053d66b93bc624ef93f77e5f98",
					},
					//https://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}_[mstzb].jpg
					success : function (data) {
						$(data.photos.photo).each(function (idx,elemento) {
							url = 	"https://farm" + 
									elemento.farm +
									".staticflickr.com/" + 
									elemento.server +
									"/" + 
									elemento.id + 
									"_" +
									elemento.secret + 
									"_s.jpg";
							console.log(url);
							$("#divcontent").append($("<div/>").addClass("photo").append($("<img/>").attr("src",url)));

						}) ;
						
					}

				})

			}






			$("#bclean").click(function() {
				$("#divcontent").empty();
			});
			$("#bget").click(function () {
				$.ajax({
					url : "https://api.flickr.com/services/rest/",
					dataType : "json",
					method : "GET",
					data : {
						//"method": "flickr.photos.getRecent",
						"method": "flickr.photos.search",
						"text" : $("#textsearch").val(),
						"per_page" : 20,
						"page": 1,
						"format": "json",
						"nojsoncallback" : 1,
						"api_key" : "1c029a053d66b93bc624ef93f77e5f98",
					},
					//https://farm{farm-id}.staticflickr.com/{server-id}/{id}_{secret}_[mstzb].jpg
					success : function (data) {
						$(data.photos.photo).each(function (idx,elemento) {
							url = 	"https://farm" + 
									elemento.farm +
									".staticflickr.com/" + 
									elemento.server +
									"/" + 
									elemento.id + 
									"_" +
									elemento.secret + 
									"_s.jpg";
							console.log(url);
							$("#divcontent").append($("<div/>").addClass("photo").append($("<img/>").attr("src",url)));

						}) ;
						
					}

				})
			})
		});



	</script>
</head>
<body>
<div id="divcontrol">	
	<input type="text" id="textsearch" placeholder="o que quer pesquisar?"/>
	<button id="bget">Obter Fotos</button>
	<button id="bclean">Limpar Fotos</button>
</div>
<div id="divcontent">
jbakdshkasjdhja
</div>
</body>
</html>